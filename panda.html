<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>íŒë‹¤ í´ë¦­ ë¦¬ë“¬ê²Œì„</title>
<style>
  body {
    margin: 0;
    background: #222;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  .stage {
    position: relative;
    width: 926px;
    height: 574px;
    background: url("img/panda/bg.png") no-repeat center/cover;
    overflow: hidden;
  }

  .item {
    position: absolute;
  }

  .item1 { left: 343px; bottom: 152px; width: 259px; height: 343px; }
  .item2 { left: 96px; top: 45px; width: 239px; height: 307px; }
  .item3 { left: 57px; top: 433px; width: 237px; height: 304px; transition: transform 0.3s ease; cursor: pointer; }
  .item4 { right: 57px; top: 433px; width: 239px; height: 307px; transition: transform 0.3s ease; cursor: pointer; }
  .item5 { right: 74px; top: 74px; width: 236px; height: 87px; }

  /* hover ì‹œ ì‚´ì§ ì˜¬ë¼ì˜¤ê¸° */
  .item3:hover, .item4:hover {
    transform: translateY(-30px);
  }

  /* ìŒí‘œ í‘œì‹œ */
  .note {
    position: absolute;
    top: 220px;
    width: 100px;
    height: 100px;
    opacity: 0;
    transition: opacity 0.4s ease;
    z-index: 10;
  }

  #noteL { left: 200px; }
  #noteR { right: 200px; }
  .show { opacity: 1; }

</style>
</head>
<body>
  <div class="stage">
    <div class="item item1">
      <img src="img/panda/basic.gif">
    </div>
    <div class="item item2">
      <img src="img/panda/text.gif">
    </div>
    <div class="item item3" id="leftBtn">
      <img src="img/panda/left.gif">
    </div>
    <div class="item item4" id="rightBtn">
      <img src="img/panda/right.gif">
    </div>
    <div class="item item5">
      <img id="clearImg" src="img/panda/clear_0.png">
    </div>

    <!-- ğŸµ ìŒí‘œ í‘œì‹œ -->
    <img id="noteL" class="note" src="img/panda/soundL.png" alt="ì™¼ìª½ ìŒí‘œ">
    <img id="noteR" class="note" src="img/panda/soundR.png" alt="ì˜¤ë¥¸ìª½ ìŒí‘œ">
  </div>

  <script>
    const sequence = ["left", "left", "right", "left"]; // ì •ë‹µ ìˆœì„œ
    let currentStep = 0;

    const noteL = document.getElementById("noteL");
    const noteR = document.getElementById("noteR");
    const clearImg = document.getElementById("clearImg");
    const leftBtn = document.getElementById("leftBtn");
    const rightBtn = document.getElementById("rightBtn");

    // í˜„ì¬ ë‹¨ê³„ì˜ ìŒí‘œ í‘œì‹œ
    function showNote() {
      noteL.classList.remove("show");
      noteR.classList.remove("show");

      const current = sequence[currentStep];
      if (current === "left") {
        noteL.classList.add("show");
      } else if (current === "right") {
        noteR.classList.add("show");
      }
    }

    // í´ë¦­ìœ¼ë¡œ ì…ë ¥ ì²˜ë¦¬
    leftBtn.addEventListener("click", () => handleInput("left"));
    rightBtn.addEventListener("click", () => handleInput("right"));

    function handleInput(dir) {
      if (dir === sequence[currentStep]) {
        currentStep++;

        if (currentStep < sequence.length) {
          showNote();
        } else {
          // âœ… í´ë¦¬ì–´
          noteL.classList.remove("show");
          noteR.classList.remove("show");
          clearImg.src = "img/panda/clear_1.png";
          flashSuccess();
          currentStep = 0;
          setTimeout(() => {
            clearImg.src = "img/panda/clear_0.png";
            showNote(); // ë‹¤ì‹œ ì‹œì‘
          }, 1500);
        }
      } else {
        // âŒ ì‹¤íŒ¨
        currentStep = 0;
        flashError();
        showNote();
      }
    }

    // ì‹¤íŒ¨ ì‹œ í™”ë©´ ê¹œë¹¡
    function flashError() {
      document.body.style.backgroundColor = "#552222";
      setTimeout(() => (document.body.style.backgroundColor = "#222"), 200);
    }

    // ì„±ê³µ ì‹œ ì‚´ì§ ë°˜ì§
    function flashSuccess() {
      document.body.style.backgroundColor = "#226622";
      setTimeout(() => (document.body.style.backgroundColor = "#222"), 200);
    }

    // ì‹œì‘ ì‹œ ì²« ìŒí‘œ í‘œì‹œ
    showNote();
  </script>
</body>
</html>
